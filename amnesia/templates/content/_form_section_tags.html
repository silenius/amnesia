<!-- TAGS -->

<script type="text/javascript">
    /* <![CDATA[ */
    Yeti.Evt.bind(window, 'load', function() {
        var tag_list = new Bbpf.TagList({
            container : 'tag_list',
            parameters : {
                sort : 'name',
                limit : 0
            },
            url : "${url('/tag/all')}"
        });
//            tag_list.load();

        Yeti.Evt.bind(Yeti.Element('tag_save'), 'click', function() {
            var input = Yeti.Element('tag');
            var tag = new Bbpf.Tag({'data' : {'name' : input.value}});
            tag.save();
            tag.dispatcher.add('after_save_success', function(params) {
                tag_list.add_tag(params.tag, true);
            });
        });
    /* ]]> */
    });
</script>

<div class="form_section" id="tags">
    <div class="form_title">
        <img src="${url('/images/three_tags.png')}" />Tag list
    </div>
    <div class="form_description">Select appropriate tags (if any). Hint: use <b>ctrl + left click</b> to select.</div>
    <select id="tag_list" multiple="multiple" size="15" name="tags">
        <option tal:repeat="tag all_tags" value="${tag.id}">${tag.name}</option>
    </select>
    <p>
        Add another tag: 
        <input type="text" id="tag" name="name" />
        <a href="#" id="tag_save"><img src="${url('/images/accept.png')}" style="vertical-align:middle" /></a>
    </p>
</div>
